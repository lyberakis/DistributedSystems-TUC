(this["webpackJsonpreact-chess"]=this["webpackJsonpreact-chess"]||[]).push([[0],{36:function(e,t,s){e.exports=s(85)},41:function(e,t,s){e.exports=s.p+"static/media/white_bishop.28e8d8aa.svg"},42:function(e,t,s){e.exports=s.p+"static/media/black_bishop.749373a9.svg"},43:function(e,t,s){e.exports=s.p+"static/media/white_king.31362a80.svg"},44:function(e,t,s){e.exports=s.p+"static/media/black_king.ea645f11.svg"},45:function(e,t,s){e.exports=s.p+"static/media/white_knight.3ece5029.svg"},46:function(e,t,s){e.exports=s.p+"static/media/black_knight.88ad52be.svg"},47:function(e,t,s){e.exports=s.p+"static/media/white_pawn.27d127d0.svg"},48:function(e,t,s){e.exports=s.p+"static/media/black_pawn.44553199.svg"},49:function(e,t,s){e.exports=s.p+"static/media/white_queen.01938cfd.svg"},50:function(e,t,s){e.exports=s.p+"static/media/black_queen.9fbe0beb.svg"},51:function(e,t,s){e.exports=s.p+"static/media/white_rook.007b43f5.svg"},52:function(e,t,s){e.exports=s.p+"static/media/black_rook.e7f61dec.svg"},82:function(e,t){},85:function(e,t,s){"use strict";s.r(t);var a=s(0),i=s.n(a),r=s(34),n=s.n(r),o=(s(9),s(7)),l=s(1),c=s(2),h=s(6),u=s(4),g=s(3);function v(e){return i.a.createElement("button",{className:"square "+e.shade,onClick:e.onClick,style:e.style})}var f=function(e){Object(u.a)(s,e);var t=Object(g.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"renderSquare",value:function(e,t){var s=this;return i.a.createElement(v,{style:this.props.squares[e]?this.props.squares[e].style:null,shade:t,onClick:function(){return s.props.onClick(e)}})}},{key:"render",value:function(){for(var e=[],t=0;t<8;t++){for(var s=[],a=0;a<8;a++){var r=p(t)&&p(a)||!p(t)&&!p(a)?"light-square":"dark-square";s.push(this.renderSquare(8*t+a,r))}e.push(i.a.createElement("div",{className:"board-row"},s))}return i.a.createElement("div",{id:"centered"},e)}}]),s}(i.a.Component);function p(e){return e%2===0}var b=function(e){Object(u.a)(s,e);var t=Object(g.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"renderSquare",value:function(e,t,s){return i.a.createElement(v,{piece:e,style:e.style})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("div",{className:"board-row"},this.props.whiteFallenSoldiers.map((function(t,s){return e.renderSquare(t,s)}))),i.a.createElement("div",{className:"board-row"},this.props.blackFallenSoldiers.map((function(t,s){return e.renderSquare(t,s)}))))}}]),s}(i.a.Component),S=function e(t,s){Object(l.a)(this,e),this.player=t,this.style={backgroundImage:"url('"+s+"')"}},k=function(e){Object(u.a)(a,e);var t=Object(g.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e,s(1===e?41:42))}return Object(c.a)(a,[{key:"isMovePossible",value:function(e,t){return Math.abs(e-t)%9===0||Math.abs(e-t)%7===0}},{key:"getSrcToDestPath",value:function(e,t){var s,a,i,r=[];e>t?(s=t,a=e):(s=e,a=t),Math.abs(e-t)%9===0?(i=9,s+=9):(i=7,s+=7);for(var n=s;n<a;n+=i)r.push(n);return r}}]),a}(S),d=function(e){Object(u.a)(a,e);var t=Object(g.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e,s(1===e?43:44))}return Object(c.a)(a,[{key:"isMovePossible",value:function(e,t){return e-9===t||e-8===t||e-7===t||e+1===t||e+9===t||e+8===t||e+7===t||e-1===t}},{key:"getSrcToDestPath",value:function(e,t){return[]}}]),a}(S),y=function(e){Object(u.a)(a,e);var t=Object(g.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e,s(1===e?45:46))}return Object(c.a)(a,[{key:"isMovePossible",value:function(e,t){return e-17===t||e-10===t||e+6===t||e+15===t||e-15===t||e-6===t||e+10===t||e+17===t}},{key:"getSrcToDestPath",value:function(){return[]}}]),a}(S),m=function(e){Object(u.a)(a,e);var t=Object(g.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e,s(1===e?47:48))).initialPositions={1:[48,49,50,51,52,53,54,55],2:[8,9,10,11,12,13,14,15]},i}return Object(c.a)(a,[{key:"isMovePossible",value:function(e,t,s){if(1===this.player){if(t===e-8&&!s||t===e-16&&-1!==this.initialPositions[1].indexOf(e))return!0;if(s&&(t===e-9||t===e-7))return!0}else if(2===this.player){if(t===e+8&&!s||t===e+16&&-1!==this.initialPositions[2].indexOf(e))return!0;if(s&&(t===e+9||t===e+7))return!0}return!1}},{key:"getSrcToDestPath",value:function(e,t){return t===e-16?[e-8]:t===e+16?[e+8]:[]}}]),a}(S),P=function(e){Object(u.a)(a,e);var t=Object(g.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e,s(1===e?49:50))}return Object(c.a)(a,[{key:"isMovePossible",value:function(e,t){var s=e%8,a=8-s;return Math.abs(e-t)%9===0||Math.abs(e-t)%7===0||Math.abs(e-t)%8===0||t>=e-s&&t<e+a}},{key:"getSrcToDestPath",value:function(e,t){var s,a,i,r=[];e>t?(s=t,a=e):(s=e,a=t),Math.abs(e-t)%8===0?(i=8,s+=8):Math.abs(e-t)%9===0?(i=9,s+=9):Math.abs(e-t)%7===0?(i=7,s+=7):(i=1,s+=1);for(var n=s;n<a;n+=i)r.push(n);return r}}]),a}(S),w=function(e){Object(u.a)(a,e);var t=Object(g.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e,s(1===e?51:52))}return Object(c.a)(a,[{key:"isMovePossible",value:function(e,t){var s=e%8,a=8-s;return Math.abs(e-t)%8===0||t>=e-s&&t<e+a}},{key:"getSrcToDestPath",value:function(e,t){var s,a,i,r=[];e>t?(s=t,a=e):(s=e,a=t),Math.abs(e-t)%8===0?(i=8,s+=8):(i=1,s+=1);for(var n=s;n<a;n+=i)r.push(n);return r}}]),a}(S);function M(){for(var e=Array(64).fill(null),t=8;t<16;t++)e[t]=new m(2),e[t+40]=new m(1);return e[0]=new w(2),e[7]=new w(2),e[56]=new w(1),e[63]=new w(1),e[1]=new y(2),e[6]=new y(2),e[57]=new y(1),e[62]=new y(1),e[2]=new k(2),e[5]=new k(2),e[58]=new k(1),e[61]=new k(1),e[3]=new P(2),e[4]=new d(2),e[59]=new P(1),e[60]=new d(1),e}var T=s(35),D=s.n(T);function O(e,t){var s={query:"token="+t},a=D()(e,s);return{socket:a,connectionStatus:a.connected?0:-1}}function j(e){var t=[];if(e)for(var s=0;s<e.length;s++){var a=e[s].toString().split(" ");switch(a[0]){case"King":t.push(new d(parseInt(a[1])));break;case"Pawn":t.push(new m(parseInt(a[1])));break;case"Queen":t.push(new P(parseInt(a[1])));break;case"Bishop":t.push(new k(parseInt(a[1])));break;case"Knight":t.push(new y(parseInt(a[1])));break;case"Rook":t.push(new w(parseInt(a[1])));break;default:t.push(null)}}return t}var q=function(e){Object(u.a)(s,e);var t=Object(g.a)(s);function s(e){var a;Object(l.a)(this,s),a=t.call(this,e);var i,r=function(){var e=window.location.href,t=new URL(e),s=t.hostname,a=t.searchParams.get("pm"),i=t.searchParams.get("gm");return{host:s,token:t.searchParams.get("token"),playmanster:a,gamemaster:i}}(),n=O(r.host+":"+r.playmanster,r.token);return a.state={squares:M(),whiteFallenSoldiers:[],blackFallenSoldiers:[],player:1,sourceSelection:-1,kingStatus:"",turn:"white",type:null,myTurn:!1,changePawn:-1,host:r.host,gamemaster:r.gamemaster,token:r.token,socket:n.socket,status:"",connectionStatus:n.connectionStatus,progress:0,roundID:null},a.setBishop=a.setBishop.bind(Object(h.a)(a)),a.setQueen=a.setQueen.bind(Object(h.a)(a)),a.setKnight=a.setKnight.bind(Object(h.a)(a)),a.setRook=a.setRook.bind(Object(h.a)(a)),(i=Object(h.a)(a)).state.socket.on("wait",(function(e){i.setState({connectionStatus:1,roundID:e.roundID})})),i.state.socket.on("init",(function(e){null===i.state.type?i.setState({connectionStatus:2,myTurn:e.turn,roundID:e.roundID}):i.setState({connectionStatus:2,roundID:e.roundID})})),i.state.socket.on("viewer",(function(e){console.log("VIWER");var t=j(e);i.setState({connectionStatus:5,squares:t,myTurn:!1})})),i.state.socket.on("board",(function(e){var t,s,a=j(e.board),r=j(e.whiteFallenSoldiers),n=j(e.blackFallenSoldiers);e.dontChange?(t=i.state.turn,s=i.state.player):(t="white"===i.state.turn?"black":"white",s=1===i.state.player?2:1),console.log(e.board),console.log(a),i.setState({squares:a,turn:t,whiteFallenSoldiers:r,blackFallenSoldiers:n,status:e.status,kingStatus:e.kingStatus,player:s,myTurn:!0}),0!==e.progress&&i.setState({connectionStatus:3})})),i.state.socket.on("disconnect",(function(e){if(!(i.state.connectionStatus<0||i.state.connectionStatus>2)){i.state.socket.disconnect(),i.setState({connectionStatus:4});var t=new XMLHttpRequest;t.onload=function(e){if(4===t.readyState)if(200===t.connectionStatus){var s=JSON.parse(t.responseText);i.reconnect(s.playmaster)}else 403===t.connectionStatus&&i.setState({connectionStatus:-3})};var s="http://"+i.state.host+":"+i.state.gamemaster+"?token="+i.state.token+"&game=chess";t.open("GET",s),t.send()}})),i.state.socket.on("endgame",(function(e){i.setState({connectionStatus:4}),i.state.socket.disconnect()})),a}return Object(c.a)(s,[{key:"handleClick",value:function(e){if(this.state.myTurn){var t=this.state.squares.slice();if(-1===this.state.sourceSelection)t[e]&&t[e].player===this.state.player?(t[e].style=Object(o.a)(Object(o.a)({},t[e].style),{},{backgroundColor:"RGB(111,143,114)"}),this.setState({status:"Choose destination for the selected piece",sourceSelection:e})):(this.setState({status:"Wrong selection. Choose player "+this.state.player+" pieces."}),t[e]&&(t[e].style=Object(o.a)(Object(o.a)({},t[e].style),{},{backgroundColor:""})));else if(this.state.sourceSelection>-1)if(t[this.state.sourceSelection].style=Object(o.a)(Object(o.a)({},t[this.state.sourceSelection].style),{},{backgroundColor:""}),!t[e]||t[e].player!==this.state.player||"King"!==t[this.state.sourceSelection].constructor.name&&"Rook"!==t[this.state.sourceSelection].constructor.name||"King"!==t[e].constructor.name&&"Rook"!==t[e].constructor.name)if(t[e]&&t[e].player===this.state.player)this.setState({status:"Wrong selection. Choose valid source and destination again.",sourceSelection:-1});else{var s=this.state.whiteFallenSoldiers.slice(),a=this.state.blackFallenSoldiers.slice(),i=!!t[e],r=t[this.state.sourceSelection].isMovePossible(this.state.sourceSelection,e,i),n=t[this.state.sourceSelection].getSrcToDestPath(this.state.sourceSelection,e),l=this.isMoveLegal(n,t);if(r&&l){var c=!1,h=!1;null!==t[e]&&(1===t[e].player?(s.push(t[e]),c=!0):(a.push(t[e]),h=!0));var u=!1;"Check."===this.state.kingStatus&&(u=!0);var g=0,v=t[e];t[e]=t[this.state.sourceSelection],t[this.state.sourceSelection]=null;var f=1===this.state.player?2:1,p="white"===this.state.turn?"black":"white";this.setState({sourceSelection:-1,squares:t,whiteFallenSoldiers:s,blackFallenSoldiers:a,myTurn:!this.state.myTurn,player:f,status:"",kingStatus:"",turn:p,type:p,changePawn:-1});var b=!0;if(u){for(var S=0;S<t.length;S++)if(t[S]&&"King"===t[S].constructor.name&&t[S].player===this.state.player){for(var k=0;k<t.length;k++)if(t[k]&&t[k].player!==this.state.player){var d=t[k].getSrcToDestPath(k,S);if(t[k].isMovePossible(k,S,i)&&this.isMoveLegal(d,t)){t[this.state.sourceSelection]=t[e],t[e]=v,f=1===this.state.player?1:2,p="white"===this.state.turn?"white":"black",c?s.pop():h&&a.pop(),this.setState({squares:t,whiteFallenSoldiers:s,blackFallenSoldiers:a,player:f,myTurn:this.state.myTurn,kingStatus:"Check.",status:"Wrong selection. You need to avoid check.",turn:p,type:p}),g=-1,b=!1;break}}break}}else for(var y=0;y<t.length;y++)if(t[y]&&"King"===t[y].constructor.name&&t[y].player===this.state.player){for(var m=0;m<t.length;m++)if(t[m]&&t[m].player!==this.state.player){var P=t[m].getSrcToDestPath(m,y);if(t[m].isMovePossible(m,y,i)&&this.isMoveLegal(P,t)){t[this.state.sourceSelection]=t[e],t[e]=v,f=1===this.state.player?1:2,p="white"===this.state.turn?"white":"black",c?s.pop():h&&a.pop(),this.setState({squares:t,whiteFallenSoldiers:s,blackFallenSoldiers:a,myTurn:this.state.myTurn,player:f,kingStatus:"",status:"Wrong selection. You cannot go to check.",turn:p,type:p}),g=-1,b=!1;break}}break}if(b){for(var w=0;w<t.length;w++)if(t[w]&&"King"===t[w].constructor.name&&t[w].player!==this.state.player){for(var M=0;M<t.length;M++)if(t[M]&&t[M].player===this.state.player){var T=t[M].getSrcToDestPath(M,w);if(t[M].isMovePossible(M,w,i)&&this.isMoveLegal(T,t)){var D=!1;T[T.length]=M;for(var O=0;O<t.length;O++)if(t[O]&&t[O].player!==this.state.player)for(var j=0;j<T.length;j++)if(t[O].isMovePossible(O,T[j],i)&&this.isMoveLegal(t[O].getSrcToDestPath(O,T[j]),t)&&"King"!==t[O].constructor.name){D=!0;break}if(!0===D){var q=0;if((!t[w-1]||w-1===M)&&w-1>=0){for(var L=0;L<t.length;L++)if(t[L]&&t[L].player===this.state.player&&L!==M){var C=!!t[L];if(t[L].isMovePossible(L,w-1,C)&&this.isMoveLegal(t[L].getSrcToDestPath(L,w-1),t)){q++;break}}}else q++;if((!t[w+1]||w+1===M)&&w+1<64){for(var I=0;I<t.length;I++)if(t[I]&&t[I].player===this.state.player&&I!==M){var F=!!t[I];if(t[I].isMovePossible(I,w+1,F)&&this.isMoveLegal(t[I].getSrcToDestPath(I,w+1),t)){q++;break}}}else q++;if((!t[w-7]||w-7===M)&&w-7>=0){for(var E=0;E<t.length;E++)if(t[E]&&t[E].player===this.state.player&&E!==M){var K=!!t[E];if(t[E].isMovePossible(E,w-7,K)&&this.isMoveLegal(t[E].getSrcToDestPath(E,w-7),t)){q++;break}}}else q++;if((!t[w+7]||w+7===M)&&w+7<64){for(var x=0;x<t.length;x++)if(t[x]&&t[x].player===this.state.player&&x!==M){var R=!!t[x];if(t[x].isMovePossible(x,w+7,R)&&this.isMoveLegal(t[x].getSrcToDestPath(x,w+7),t)){q++;break}}}else q++;if((!t[w-8]||w-8===M)&&w-8>=0){for(var _=0;_<t.length;_++)if(t[_]&&t[_].player===this.state.player&&_!==M){var N=!!t[_];if(t[_].isMovePossible(_,w-8,N)&&this.isMoveLegal(t[_].getSrcToDestPath(_,w-8),t)){q++;break}}}else q++;if((!t[w+8]||w+8===M)&&w+8<64){for(var B=0;B<t.length;B++)if(t[B]&&t[B].player===this.state.player&&B!==M){var Q=!!t[B];if(t[B].isMovePossible(B,w+8,Q)&&this.isMoveLegal(t[B].getSrcToDestPath(B,w+8),t)){q++;break}}}else q++;if((!t[w-9]||w-9===M)&&w-9>=0){for(var W=0;W<t.length;W++)if(t[W]&&t[W].player===this.state.player&&W!==M){var J=!!t[W];if(t[W].isMovePossible(W,w-9,J)&&this.isMoveLegal(t[W].getSrcToDestPath(W,w-9),t)){q++;break}}}else q++;if((!t[w+9]||w+9===M)&&w+9<64){for(var G=0;G<t.length;G++)if(t[G]&&t[G].player===this.state.player&&G!==M){var Y=!!t[G];if(t[G].isMovePossible(G,w+9,Y)&&this.isMoveLegal(t[G].getSrcToDestPath(G,w+9),t)){q++;break}}}else q++;8===q&&(D=!1)}!0===D?(this.setState({kingStatus:"Check."}),g=1):(this.setState({kingStatus:"Checkmate."}),g=2);break}}break}for(var A=0,H=0,U=0;U<t.length;U++)t[U]&&(1===t[U].player?H++:A++);if(1===A&&1===H)this.setState({kingStatus:"Stalemate."}),g=3;else if(1===A&&1===this.state.player||1===H&&2===this.state.player)for(var V=0;V<t.length;V++)if(t[V]&&"King"===t[V].constructor.name&&t[V].player!==this.state.player){var X=0;if(!t[V-1]&&V-1>0){for(var z=0;z<t.length;z++)if(t[z]&&t[z].player===this.state.player){var Z=!!t[z];if(t[z].isMovePossible(z,V-1,Z)&&this.isMoveLegal(t[z].getSrcToDestPath(z,V-1),t)){X++;break}}}else X++;if(!t[V+1]&&V+1<64){for(var $=0;$<t.length;$++)if(t[$]&&t[$].player===this.state.player){var ee=!!t[$];if(t[$].isMovePossible($,V+1,ee)&&this.isMoveLegal(t[$].getSrcToDestPath($,V+1),t)){X++;break}}}else X++;if(!t[V-7]&&V-7>0){for(var te=0;te<t.length;te++)if(t[te]&&t[te].player===this.state.player){var se=!!t[te];if(t[te].isMovePossible(te,V-7,se)&&this.isMoveLegal(t[te].getSrcToDestPath(te,V-7),t)){X++;break}}}else X++;if(!t[V+7]&&V+7<64){for(var ae=0;ae<t.length;ae++)if(t[ae]&&t[ae].player===this.state.player){var ie=!!t[ae];if(t[ae].isMovePossible(ae,V+7,ie)&&this.isMoveLegal(t[ae].getSrcToDestPath(ae,V+7),t)){X++;break}}}else X++;if(!t[V-8]&&V-8>0){for(var re=0;re<t.length;re++)if(t[re]&&t[re].player===this.state.player){var ne=!!t[re];if(t[re].isMovePossible(re,V-8,ne)&&this.isMoveLegal(t[re].getSrcToDestPath(re,V-8),t)){X++;break}}}else X++;if(!t[V+8]&&V+8<64){for(var oe=0;oe<t.length;oe++)if(t[oe]&&t[oe].player===this.state.player){var le=!!t[oe];if(t[oe].isMovePossible(oe,V+8,le)&&this.isMoveLegal(t[oe].getSrcToDestPath(oe,V+8),t)){X++;break}}}else X++;if(!t[V-9]&&V-9>0){for(var ce=0;ce<t.length;ce++)if(t[ce]&&t[ce].player===this.state.player){var he=!!t[ce];if(t[ce].isMovePossible(ce,V-9,he)&&this.isMoveLegal(t[ce].getSrcToDestPath(ce,V-9),t)){X++;break}}}else X++;if(!t[V+9]&&V+9<64){for(var ue=0;ue<t.length;ue++)if(t[ue]&&t[ue].player===this.state.player){var ge=!!t[ue];if(t[ue].isMovePossible(ue,V+9,ge)&&this.isMoveLegal(t[ue].getSrcToDestPath(ue,V+9),t)){X++;break}}}else X++;8===X&&(this.setState({kingStatus:"Stalemate."}),g=3);break}if(1===this.state.player){for(var ve=0;ve<8;ve++)if(t[ve]&&1===t[ve].player&&"Pawn"===t[ve].constructor.name){this.setState({changePawn:ve});break}}else for(var fe=56;fe<64;fe++)if(t[fe]&&2===t[fe].player&&"Pawn"===t[fe].constructor.name){this.setState({changePawn:fe});break}}if(-1!==g){Ke=this.classesToStrings(t),xe=this.classesToStrings(s),Re=this.classesToStrings(a);var pe={roundID:this.state.roundID,board:Ke,whiteFallenSoldiers:xe,blackFallenSoldiers:Re,kingStatus:"",progress:0};2===g?pe={roundID:this.state.roundID,board:Ke,kingStatus:"Checkmate.",whiteFallenSoldiers:xe,blackFallenSoldiers:Re,progress:1}:3===g?pe={roundID:this.state.roundID,board:Ke,kingStatus:"Stalemate.",whiteFallenSoldiers:xe,blackFallenSoldiers:Re,progress:2}:1===g&&(pe={roundID:this.state.roundID,board:Ke,whiteFallenSoldiers:xe,blackFallenSoldiers:Re,kingStatus:"Check.",progress:0}),this.state.socket.emit("update",pe)}}else this.setState({status:"Wrong selection. Choose valid source and destination again.",sourceSelection:-1})}else{var be=!0;if(1===t[e].player?60===this.state.sourceSelection&&"King"===t[this.state.sourceSelection].constructor.name?63!==e&&56!==e&&(be=!1):60===e&&"King"===t[e].constructor.name?63!==this.state.sourceSelection&&56!==this.state.sourceSelection&&(be=!1):be=!1:4===this.state.sourceSelection&&"King"===t[this.state.sourceSelection].constructor.name?0!==e&&7!==e&&(be=!1):4===e&&"King"===t[e].constructor.name?0!==this.state.sourceSelection&&7!==this.state.sourceSelection&&(be=!1):be=!1,be&&(1===t[e].player?63===e||63===this.state.sourceSelection?(t[61]||t[62])&&(be=!1):(t[57]||t[58]||t[59])&&(be=!1):7===e||7===this.state.sourceSelection?(t[5]||t[6])&&(be=!1):(t[1]||t[2]||t[3])&&(be=!1),be))if(1===t[e].player){if(63===e||63===this.state.sourceSelection){for(var Se=0;Se<t.length;Se++)if(t[Se]&&t[Se].player!==this.state.player){var ke=t[Se].getSrcToDestPath(Se,60),de=t[Se].getSrcToDestPath(Se,61),ye=t[Se].getSrcToDestPath(Se,62);if(t[Se].isMovePossible(Se,60,!1)&&this.isMoveLegal(ke,t)||t[Se].isMovePossible(Se,61,!1)&&this.isMoveLegal(de,t)||t[Se].isMovePossible(Se,62,!1)&&this.isMoveLegal(ye,t)){be=!1;break}}}else for(var me=0;me<t.length;me++)if(t[me]&&t[me].player!==this.state.player){var Pe=t[me].getSrcToDestPath(me,60),we=t[me].getSrcToDestPath(me,59),Me=t[me].getSrcToDestPath(me,58);if(t[me].isMovePossible(me,60,!1)&&this.isMoveLegal(Pe,t)||t[me].isMovePossible(me,59,!1)&&this.isMoveLegal(we,t)||t[me].isMovePossible(me,58,!1)&&this.isMoveLegal(Me,t)){be=!1;break}}}else if(7===e||7===this.state.sourceSelection){for(var Te=0;Te<t.length;Te++)if(t[Te]&&t[Te].player!==this.state.player){var De=t[Te].getSrcToDestPath(Te,4),Oe=t[Te].getSrcToDestPath(Te,5),je=t[Te].getSrcToDestPath(Te,6);if(t[Te].isMovePossible(Te,4,!1)&&this.isMoveLegal(De,t)||t[Te].isMovePossible(Te,5,!1)&&this.isMoveLegal(Oe,t)||t[Te].isMovePossible(Te,6,!1)&&this.isMoveLegal(je,t)){be=!1;break}}}else for(var qe=0;qe<t.length;qe++)if(t[qe]&&t[qe].player!==this.state.player){var Le=t[qe].getSrcToDestPath(qe,4),Ce=t[qe].getSrcToDestPath(qe,3),Ie=t[qe].getSrcToDestPath(qe,2);if(t[qe].isMovePossible(qe,4,!1)&&this.isMoveLegal(Le,t)||t[qe].isMovePossible(qe,3,!1)&&this.isMoveLegal(Ce,t)||t[qe].isMovePossible(qe,2,!1)&&this.isMoveLegal(Ie,t)){be=!1;break}}if(be){1===t[e].player?(63===e||63===this.state.sourceSelection?(t[62]=t[60],t[61]=t[63],t[63]=null):(t[58]=t[60],t[59]=t[56],t[56]=null),t[60]=null):(7===e||7===this.state.sourceSelection?(t[6]=t[4],t[5]=t[7],t[7]=null):(t[2]=t[4],t[3]=t[0],t[0]=null),t[4]=null);var Fe=1===this.state.player?2:1,Ee="white"===this.state.turn?"black":"white";this.setState({squares:t,player:Fe,turn:Ee,type:Ee,kingStatus:"",myTurn:!this.state.myTurn,changePawn:-1,status:"Castling occured.",sourceSelection:-1});var Ke=this.classesToStrings(t),xe=this.classesToStrings(this.state.whiteFallenSoldiers),Re=this.classesToStrings(this.state.blackFallenSoldiers),_e={roundID:this.state.roundID,board:Ke,whiteFallenSoldiers:xe,blackFallenSoldiers:Re,progress:0};this.state.socket.emit("update",_e)}else this.setState({status:"Wrong selection. Castling not allowed.",sourceSelection:-1})}}}},{key:"isMoveLegal",value:function(e,t){for(var s=!0,a=0;a<e.length;a++)null!==t[e[a]]&&(s=!1);return s}},{key:"classesToStrings",value:function(e){console.log("squares"),console.log(e);for(var t=[],s=0;s<e.length;s++)e[s]?(console.log(e[s]instanceof k),console.log(s),e[s]instanceof d?1===e[s].player?t.push("King 1"):t.push("King 2"):e[s]instanceof m?1===e[s].player?t.push("Pawn 1"):t.push("Pawn 2"):e[s]instanceof P?1===e[s].player?t.push("Queen 1"):t.push("Queen 2"):e[s]instanceof k?1===e[s].player?t.push("Bishop 1"):t.push("Bishop 2"):e[s]instanceof y?1===e[s].player?t.push("Knight 1"):t.push("Knight 2"):e[s]instanceof w&&(1===e[s].player?t.push("Rook 1"):t.push("Rook 2"))):t.push(0);return console.log("textSquares"),console.log(t),t}},{key:"setBishop",value:function(){var e=this.state.squares;1===this.state.player?(e[this.state.changePawn]=new k(2),this.setState({squares:e,changePawn:-1})):(e[this.state.changePawn]=new k(1),this.setState({squares:e,changePawn:-1}));var t=this.classesToStrings(this.state.squares),s={roundID:this.state.roundID,board:t,dontChange:!0};this.state.socket.emit("update",s)}},{key:"setQueen",value:function(){var e=this.state.squares;1===this.state.player?(e[this.state.changePawn]=new P(2),this.setState({squares:e,changePawn:-1})):(e[this.state.changePawn]=new P(1),this.setState({squares:e,changePawn:-1}));var t=this.classesToStrings(this.state.squares),s={roundID:this.state.roundID,board:t,dontChange:!0};this.state.socket.emit("update",s)}},{key:"setKnight",value:function(){var e=this.state.squares;1===this.state.player?(e[this.state.changePawn]=new y(2),this.setState({squares:e,changePawn:-1})):(e[this.state.changePawn]=new y(1),this.setState({squares:e,changePawn:-1}));var t=this.classesToStrings(this.state.squares),s={roundID:this.state.roundID,board:t,dontChange:!0};this.state.socket.emit("update",s)}},{key:"setRook",value:function(){var e=this.state.squares;1===this.state.player?(e[this.state.changePawn]=new w(2),this.setState({squares:e,changePawn:-1})):(e[this.state.changePawn]=new w(1),this.setState({squares:e,changePawn:-1}));var t=this.classesToStrings(this.state.squares),s={roundID:this.state.roundID,board:t,dontChange:!0};this.state.socket.emit("update",s)}},{key:"render",value:function(){var e=this,t=!1;return-1!==this.state.changePawn&&(t=!0),i.a.createElement("div",null,i.a.createElement("div",{className:"game"},i.a.createElement("div",{className:"game-board"},i.a.createElement(f,{squares:this.state.squares,onClick:function(t){return e.handleClick(t)}})),i.a.createElement("div",{className:"game-info"},i.a.createElement("h3",null,"Turn"),i.a.createElement("div",{id:"player-turn-box",style:{backgroundColor:this.state.turn}}),i.a.createElement("div",{className:"game-status"},this.state.kingStatus),i.a.createElement("div",{className:"game-status"},this.state.status),i.a.createElement("div",{className:"fallen-soldier-block"},i.a.createElement(b,{whiteFallenSoldiers:this.state.whiteFallenSoldiers,blackFallenSoldiers:this.state.blackFallenSoldiers})),t?i.a.createElement("div",null," ",i.a.createElement("button",{onClick:this.setBishop}," Bishop "),i.a.createElement("button",{onClick:this.setQueen}," Queen "),i.a.createElement("button",{onClick:this.setKnight}," Knight "),i.a.createElement("button",{onClick:this.setRook}," Rook ")):i.a.createElement("div",null," "))))}}]),s}(i.a.Component);n.a.render(i.a.createElement(q,null),document.getElementById("root"))},9:function(e,t,s){}},[[36,1,2]]]);
//# sourceMappingURL=main.43843ee4.chunk.js.map