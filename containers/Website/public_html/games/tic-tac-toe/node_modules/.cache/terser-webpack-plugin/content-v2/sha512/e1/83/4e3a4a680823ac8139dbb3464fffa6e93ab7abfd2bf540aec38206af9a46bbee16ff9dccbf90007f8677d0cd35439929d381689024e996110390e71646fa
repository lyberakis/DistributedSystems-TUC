{"map":{"version":3,"sources":["static/js/main.9a51607e.chunk.js"],"names":["this","push","17","module","exports","__webpack_require__","36","71","74","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","assertThisInitialized","classCallCheck","createClass","inherits","createSuper","slicedToArray","calculateWinner","squares","lines","i","length","_lines$i","Object","a","b","c","highlight","list","document","getElementsByClassName","style","textShadow","isGameEnded","lib","lib_default","connect","server","token","handShake","query","socket","status","Square","props","createElement","className","onClick","value","Game_Board","_React$Component","Board","_super","apply","arguments","key","_this","renderSquare","Component","src_Game","_React$Component2","Game","_super2","_this2","call","obj","args","url_string","window","location","url","URL","host","hostname","playmanster","searchParams","get","gamemaster","getArgumenets","data","state","Array","fill","myTurn","type","roundID","on","message","setState","turn","board","console","log","winner","gameOver","disconnect","xhr","XMLHttpRequest","onload","e","readyState","respone","JSON","parse","responseText","reconnect","open","send","slice","endgame","progress","emit","addEventListener","ev","preventDefault","setupBeforeUnloadListener","_this3","showGameStatus","endState","win","symbol","end","showWinner","showTurn","showSymbol","handleClick","render","getElementById"],"mappings":"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"},"code":"(this[\"webpackJsonptic-tac-toe\"]=this[\"webpackJsonptic-tac-toe\"]||[]).push([[0],{17:function(e,t,a){},36:function(e,t,a){e.exports=a(74)},71:function(e,t){},74:function(e,t,a){\"use strict\";a.r(t);var n=a(0),s=a.n(n),r=a(33),o=a.n(r),u=(a(17),a(5)),c=a(12),i=a(13),l=a(15),d=a(14),m=a(35);function h(e){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],a=0;a<t.length;a++){var n=Object(m.a)(t[a],3),s=n[0],r=n[1],o=n[2];if(e[s]&&e[s]===e[r]&&e[s]===e[o])return f(t[a]),e[s]}return null}function f(e){var t;for(t in e)document.getElementsByClassName(\"square\")[e[t]].style.textShadow=\"red 0px 0px 10px\"}function v(e){for(var t=0;t<e.length;t++)if(null==e[t])return!1;return!0}var p=a(34),k=a.n(p);function y(e,t){var a={query:\"token=\"+t},n=k()(e,a);return{socket:n,status:n.connected?0:-1}}function b(e){return s.a.createElement(\"button\",{className:\"square\",onClick:e.onClick},e.value)}var E=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:\"renderSquare\",value:function(e){var t=this;return s.a.createElement(b,{value:this.props.squares[e],onClick:function(){return t.props.onClick(e)}})}},{key:\"render\",value:function(){return s.a.createElement(\"div\",null,s.a.createElement(\"div\",{className:\"board-row\"},this.renderSquare(0),this.renderSquare(1),this.renderSquare(2)),s.a.createElement(\"div\",{className:\"board-row\"},this.renderSquare(3),this.renderSquare(4),this.renderSquare(5)),s.a.createElement(\"div\",{className:\"board-row\"},this.renderSquare(6),this.renderSquare(7),this.renderSquare(8)))}}]),a}(s.a.Component),g=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(c.a)(this,a),n=t.call(this,e);var s,r=function(){var e=window.location.href,t=new URL(e),a=t.hostname,n=t.searchParams.get(\"pm\"),s=t.searchParams.get(\"gm\");return{host:a,token:t.searchParams.get(\"token\"),playmanster:n,gamemaster:s}}(),o=y(r.host+\":\"+r.playmanster,r.token);return n.state={host:r.host,gamemaster:r.gamemaster,squares:Array(9).fill(null),myTurn:!1,token:r.token,socket:o.socket,status:o.status,type:null,roundID:null},(s=Object(u.a)(n)).state.socket.on(\"wait\",(function(e){s.setState({status:1,roundID:e.roundID})})),s.state.socket.on(\"init\",(function(e){if(null===s.state.type){var t=e.turn,a=t?\"X\":\"O\";s.setState({status:2,type:a,myTurn:t,roundID:e.roundID})}else s.setState({status:2,roundID:e.roundID})})),s.state.socket.on(\"viewer\",(function(e){console.log(\"VIWER\"),s.setState({status:5,squares:e})})),s.state.socket.on(\"board\",(function(e){var t=e.board;e.progress,s.setState({squares:t,myTurn:!0});var a=h(t),n=v(t);(a||n)&&s.setState({status:3})})),s.state.socket.on(\"disconnect\",(function(e){if(!(s.state.status<0||s.state.status>2)){s.state.socket.disconnect(),s.setState({status:4});var t=new XMLHttpRequest;t.onload=function(e){if(4===t.readyState)if(200===t.status){var a=JSON.parse(t.responseText);s.reconnect(a.playmaster)}else 403===t.status&&s.setState({status:-3})};var a=\"http://\"+s.state.host+\":\"+s.state.gamemaster+\"?token=\"+s.state.token+\"&game=tic-tac-toe\";t.open(\"GET\",a),t.send()}})),s.state.socket.on(\"endgame\",(function(e){s.setState({status:4}),s.state.socket.disconnect()})),n}return Object(i.a)(a,[{key:\"handleClick\",value:function(e){if(this.state.myTurn&&5!==this.state.state){var t=this.state.squares.slice();if(h(t)||t[e])return;t[e]=this.state.type,this.setState({squares:t,myTurn:!this.state.myTurn});var a=h(t),n=v(t),s=0;a===this.state.type?s=1:null===a&&n&&(s=2),(n||a)&&this.setState({status:3});var r={roundID:this.state.roundID,board:t,progress:s};console.log(r),this.state.socket.emit(\"update\",r)}}},{key:\"setupBeforeUnloadListener\",value:function(){window.addEventListener(\"beforeunload\",(function(e){return e.preventDefault(),\"Are you sure you want to leave?\"}))}},{key:\"componentDidMount\",value:function(){this.setupBeforeUnloadListener()}},{key:\"render\",value:function(){var e=this,t=h(this.state.squares),a=v(this.state.squares),n=function(e){var t;switch(e){case-3:t=\"Unauthorized connection.\";break;case-2:t=\"Redirecting...\";break;case-1:t=\"No connection found.\";break;case 0:t=\"Connected!\";break;case 1:t=\"Wait for opponent to connect.\";break;case 2:t=\"The game is active.\";break;case 3:t=\"The game is completed!\";break;case 4:t=\"The opponent left.\";break;case 5:t=\"Spectator mode.\";break;default:t=\"Undefined status.\"}return t}(this.state.status),r=function(e,t,a,n){var s;return 5!==n?null!==t&&e===t||4===n?s=\"VICTORY!\":null!=e&&e!==t?s=\"DEFEAT!\":null==e&&!0===a&&(s=\"TIE!\"):null!==e?s=\"WINNER: \"+e:a&&(s=\"TIE!\"),s}(t,this.state.type,a,this.state.status);if(5!==this.state.status)var o=function(e,t){var a;return 2===e&&(a=t?\"Your turn.\":\"Opponent's turn.\"),a}(this.state.status,this.state.myTurn),u=function(e){var t;return e&&(t=\"You are: \"+e),t}(this.state.type);return s.a.createElement(\"div\",{className:\"game bg\"},s.a.createElement(\"div\",{className:\"game-title\"},s.a.createElement(\"div\",null,\"Tic - Tac - Toe\")),s.a.createElement(\"div\",{className:\"game-board\"},s.a.createElement(E,{squares:this.state.squares,onClick:function(t){return e.handleClick(t)}})),s.a.createElement(\"div\",{className:\"game-info row\"},s.a.createElement(\"div\",{className:\"status column left\"},s.a.createElement(\"div\",null,u),s.a.createElement(\"div\",null,n),s.a.createElement(\"div\",null,o)),s.a.createElement(\"div\",{className:\"column right\"},s.a.createElement(\"div\",{className:\"endstate\"},r))))}}]),a}(s.a.Component);o.a.render(s.a.createElement(g,null),document.getElementById(\"root\"))}},[[36,1,2]]]);","extractedComments":[]}