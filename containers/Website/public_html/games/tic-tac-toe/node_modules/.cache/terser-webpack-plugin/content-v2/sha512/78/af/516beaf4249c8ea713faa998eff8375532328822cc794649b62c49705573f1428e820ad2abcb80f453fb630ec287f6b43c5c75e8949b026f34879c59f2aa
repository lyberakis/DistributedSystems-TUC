{"map":{"version":3,"sources":["static/js/main.08c3fbc4.chunk.js"],"names":["this","push","17","module","exports","__webpack_require__","36","71","74","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","assertThisInitialized","classCallCheck","createClass","inherits","createSuper","slicedToArray","calculateWinner","squares","lines","i","length","_lines$i","Object","a","b","c","highlight","list","document","getElementsByClassName","style","textShadow","isGameEnded","lib","lib_default","connect","server","token","handShake","query","socket","status","Square","props","createElement","className","onClick","value","Game_Board","_React$Component","Board","_super","apply","arguments","key","_this","renderSquare","Component","src_Game","_React$Component2","Game","_super2","_this2","call","obj","args","url_string","window","location","url","URL","host","hostname","playmanster","searchParams","get","gamemaster","getArgumenets","data","state","Array","fill","myTurn","type","roundID","on","message","setState","turn","board","console","log","winner","gameOver","disconnect","xhr","XMLHttpRequest","onload","e","readyState","respone","JSON","parse","responseText","reconnect","open","send","slice","endgame","progress","emit","_this3","showGameStatus","endState","win","symbol","end","showWinner","showTurn","showSymbol","handleClick","id","render","getElementById"],"mappings":"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"},"code":"(this[\"webpackJsonptic-tac-toe\"]=this[\"webpackJsonptic-tac-toe\"]||[]).push([[0],{17:function(t,e,a){},36:function(t,e,a){t.exports=a(74)},71:function(t,e){},74:function(t,e,a){\"use strict\";a.r(e);var s=a(0),n=a.n(s),r=a(33),o=a.n(r),u=(a(17),a(5)),c=a(12),i=a(13),l=a(15),d=a(14),m=a(35);function h(t){for(var e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],a=0;a<e.length;a++){var s=Object(m.a)(e[a],3),n=s[0],r=s[1],o=s[2];if(t[n]&&t[n]===t[r]&&t[n]===t[o])return f(e[a]),t[n]}return null}function f(t){var e;for(e in t)document.getElementsByClassName(\"square\")[t[e]].style.textShadow=\"red 0px 0px 10px\"}function v(t){for(var e=0;e<t.length;e++)if(null==t[e])return!1;return!0}var p=a(34),k=a.n(p);function b(t,e){var a={query:\"token=\"+e},s=k()(t,a);return{socket:s,status:s.connected?0:-1}}function y(t){return n.a.createElement(\"button\",{className:\"square\",onClick:t.onClick},t.value)}var E=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(i.a)(a,[{key:\"renderSquare\",value:function(t){var e=this;return n.a.createElement(y,{value:this.props.squares[t],onClick:function(){return e.props.onClick(t)}})}},{key:\"render\",value:function(){return n.a.createElement(\"div\",null,n.a.createElement(\"div\",{className:\"board-row\"},this.renderSquare(0),this.renderSquare(1),this.renderSquare(2)),n.a.createElement(\"div\",{className:\"board-row\"},this.renderSquare(3),this.renderSquare(4),this.renderSquare(5)),n.a.createElement(\"div\",{className:\"board-row\"},this.renderSquare(6),this.renderSquare(7),this.renderSquare(8)))}}]),a}(n.a.Component),g=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(t){var s;Object(c.a)(this,a),s=e.call(this,t);var n,r=function(){var t=window.location.href,e=new URL(t),a=e.hostname,s=e.searchParams.get(\"pm\"),n=e.searchParams.get(\"gm\");return{host:a,token:e.searchParams.get(\"token\"),playmanster:s,gamemaster:n}}(),o=b(r.host+\":\"+r.playmanster,r.token);return s.state={host:r.host,gamemaster:r.gamemaster,squares:Array(9).fill(null),myTurn:!1,token:r.token,socket:o.socket,status:o.status,type:null,roundID:null},(n=Object(u.a)(s)).state.socket.on(\"wait\",(function(t){n.setState({status:1,roundID:t.roundID})})),n.state.socket.on(\"init\",(function(t){if(null===n.state.type){var e=t.turn,a=e?\"X\":\"O\";n.setState({status:2,type:a,myTurn:e,roundID:t.roundID})}else n.setState({status:2,roundID:t.roundID})})),n.state.socket.on(\"viewer\",(function(t){console.log(\"VIWER\"),n.setState({status:5,squares:t})})),n.state.socket.on(\"board\",(function(t){var e=t.board;t.progress,n.setState({squares:e,myTurn:!0});var a=h(e),s=v(e);(a||s)&&n.setState({status:3})})),n.state.socket.on(\"disconnect\",(function(t){if(!(n.state.status<0||n.state.status>2)){n.state.socket.disconnect(),n.setState({status:-2});var e=new XMLHttpRequest;e.onload=function(t){if(4===e.readyState)if(200===e.status){var a=JSON.parse(e.responseText);n.reconnect(a.playmaster)}else 403===e.status&&n.setState({status:-3})};var a=\"http://\"+n.state.host+\":\"+n.state.gamemaster+\"?token=\"+n.state.token+\"&game=tic-tac-toe&roundID=\"+n.state.roundID;e.open(\"GET\",a),e.send()}})),n.state.socket.on(\"endgame\",(function(t){n.setState({status:4}),n.state.socket.disconnect()})),s}return Object(i.a)(a,[{key:\"handleClick\",value:function(t){if(this.state.myTurn&&5!==this.state.state){var e=this.state.squares.slice();if(h(e)||e[t])return;e[t]=this.state.type,this.setState({squares:e,myTurn:!this.state.myTurn});var a=h(e),s=v(e),n=0;a===this.state.type?n=1:null===a&&s&&(n=2),(s||a)&&this.setState({status:3});var r={roundID:this.state.roundID,board:e,progress:n};console.log(r),this.state.socket.emit(\"update\",r)}}},{key:\"render\",value:function(){var t=this,e=h(this.state.squares),a=v(this.state.squares),s=function(t){var e;switch(t){case-3:e=\"Unauthorized connection.\";break;case-2:e=\"Redirecting...\";break;case-1:e=\"No connection found.\";break;case 0:e=\"Connected!\";break;case 1:e=\"Wait for opponent to connect.\";break;case 2:e=\"The game is active.\";break;case 3:e=\"The game is completed!\";break;case 4:e=\"The opponent left.\";break;case 5:e=\"Spectator mode.\";break;default:e=\"Undefined status.\"}return e}(this.state.status),r=function(t,e,a,s){var n;return 5!==s?null!==e&&t===e||4===s?n=\"VICTORY!\":null!=t&&t!==e?n=\"DEFEAT!\":null==t&&!0===a&&(n=\"TIE!\"):null!==t?n=\"WINNER: \"+t:a&&(n=\"TIE!\"),n}(e,this.state.type,a,this.state.status);if(5!==this.state.status)var o=function(t,e){var a;return 2===t&&(a=e?\"Your turn.\":\"Opponent's turn.\"),a}(this.state.status,this.state.myTurn),u=function(t){var e;return t&&(e=\"You are: \"+t),e}(this.state.type);return n.a.createElement(\"div\",{className:\"game\"},n.a.createElement(\"div\",{className:\"game-title\"},n.a.createElement(\"div\",null,\"Tic - Tac - Toe\")),n.a.createElement(\"div\",{className:\"game-board\"},n.a.createElement(E,{squares:this.state.squares,onClick:function(e){return t.handleClick(e)}})),n.a.createElement(\"div\",{className:\"game-info row\"},n.a.createElement(\"div\",{className:\"status column left\"},n.a.createElement(\"div\",null,u),n.a.createElement(\"div\",null,s),n.a.createElement(\"div\",null,o)),n.a.createElement(\"div\",{className:\"column right\"},n.a.createElement(\"div\",{id:\"endstate\"},r))))}}]),a}(n.a.Component);o.a.render(n.a.createElement(g,null),document.getElementById(\"root\"))}},[[36,1,2]]]);","extractedComments":[]}