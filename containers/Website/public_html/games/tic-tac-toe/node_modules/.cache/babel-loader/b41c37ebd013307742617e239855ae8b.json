{"ast":null,"code":"import _assertThisInitialized from\"/home/panagiotis/Desktop/ds_project/containers/Website/public_html/games/tic-tac-toe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _classCallCheck from\"/home/panagiotis/Desktop/ds_project/containers/Website/public_html/games/tic-tac-toe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/panagiotis/Desktop/ds_project/containers/Website/public_html/games/tic-tac-toe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/panagiotis/Desktop/ds_project/containers/Website/public_html/games/tic-tac-toe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/panagiotis/Desktop/ds_project/containers/Website/public_html/games/tic-tac-toe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./index.css';import*as condition from'./utils/gameConditions.js';import*as conn from'./utils/multiplayer.js';import*as ui from'./utils/messages.js';//SQUARE\nfunction Square(props){return/*#__PURE__*/React.createElement(\"button\",{className:\"square\",onClick:props.onClick},props.value);}//BOARD\nvar Board=/*#__PURE__*/function(_React$Component){_inherits(Board,_React$Component);var _super=_createSuper(Board);function Board(){_classCallCheck(this,Board);return _super.apply(this,arguments);}_createClass(Board,[{key:\"renderSquare\",value:function renderSquare(i){var _this=this;return/*#__PURE__*/React.createElement(Square,{value:this.props.squares[i],onClick:function onClick(){return _this.props.onClick(i);}});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"board-row\"},this.renderSquare(0),this.renderSquare(1),this.renderSquare(2)),/*#__PURE__*/React.createElement(\"div\",{className:\"board-row\"},this.renderSquare(3),this.renderSquare(4),this.renderSquare(5)),/*#__PURE__*/React.createElement(\"div\",{className:\"board-row\"},this.renderSquare(6),this.renderSquare(7),this.renderSquare(8)));}}]);return Board;}(React.Component);//GAME\nvar Game=/*#__PURE__*/function(_React$Component2){_inherits(Game,_React$Component2);var _super2=_createSuper(Game);function Game(props){var _this2;_classCallCheck(this,Game);_this2=_super2.call(this,props);//Establish Connection\nvar args=conn.getArgumenets();var data=conn.connect(args['host']+':'+args['playmanster'],args['token']);_this2.state={host:args['host'],gamemaster:args['gamemaster'],squares:Array(9).fill(null),myTurn:false,token:args['token'],socket:data['socket'],status:data['status'],type:null,roundID:null};//set event handlers for server messages\nconn.setListeners(_assertThisInitialized(_this2));return _this2;}_createClass(Game,[{key:\"handleClick\",value:function handleClick(i){if(this.state.myTurn&&this.state.state!==5){var squares=this.state.squares.slice();//create a copy of the array\n//if the game is over or the sqare is already filled, return\nif(condition.calculateWinner(squares)||squares[i]){return;}squares[i]=this.state.type;this.setState({squares:squares,myTurn:!this.state.myTurn});var winner=condition.calculateWinner(squares);var endgame=condition.isGameEnded(squares);var progress=0;if(winner===this.state.type){//check if you won\nprogress=1;}else if(winner===null&&endgame){//the game is ended and nobody won\nprogress=2;}//check if the game is ended\nif(endgame||winner){this.setState({status:3});}var message={roundID:this.state.roundID,board:squares,progress:progress};console.log(message);this.state.socket.emit('update',message);}}// Setup the `beforeunload` event listener\n},{key:\"setupBeforeUnloadListener\",value:function setupBeforeUnloadListener(){window.addEventListener(\"beforeunload\",function(ev){ev.preventDefault();return'Are you sure you want to leave?';});}},{key:\"componentDidMount\",value:function componentDidMount(){// Activate the event listener\nthis.setupBeforeUnloadListener();}},{key:\"render\",value:function render(){var _this3=this;var winner=condition.calculateWinner(this.state.squares);var gameOver=condition.isGameEnded(this.state.squares);var status=ui.showGameStatus(this.state.status);var endState=ui.showWinner(winner,this.state.type,gameOver,this.state.status);if(this.state.status!==5){var turn=ui.showTurn(this.state.status,this.state.myTurn);var symbol=ui.showSymbol(this.state.type);}return/*#__PURE__*/React.createElement(\"div\",{className:\"game bg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"game-title\"},/*#__PURE__*/React.createElement(\"div\",null,\"Tic - Tac - Toe\")),/*#__PURE__*/React.createElement(\"div\",{className:\"game-board\"},/*#__PURE__*/React.createElement(Board,{squares:this.state.squares,onClick:function onClick(i){return _this3.handleClick(i);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"game-info row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"status column left\"},/*#__PURE__*/React.createElement(\"div\",null,symbol),/*#__PURE__*/React.createElement(\"div\",null,status),/*#__PURE__*/React.createElement(\"div\",null,turn)),/*#__PURE__*/React.createElement(\"div\",{className:\"column right\"},/*#__PURE__*/React.createElement(\"div\",{className:\"endstate\"},endState))));}}]);return Game;}(React.Component);export default Game;","map":{"version":3,"sources":["/home/panagiotis/Desktop/ds_project/containers/Website/public_html/games/tic-tac-toe/src/Game.js"],"names":["React","condition","conn","ui","Square","props","onClick","value","Board","i","squares","renderSquare","Component","Game","args","getArgumenets","data","connect","state","host","gamemaster","Array","fill","myTurn","token","socket","status","type","roundID","setListeners","slice","calculateWinner","setState","winner","endgame","isGameEnded","progress","message","board","console","log","emit","window","addEventListener","ev","preventDefault","setupBeforeUnloadListener","gameOver","showGameStatus","endState","showWinner","turn","showTurn","symbol","showSymbol","handleClick"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './index.css';\nimport * as condition from './utils/gameConditions.js'; \nimport * as conn from './utils/multiplayer.js'; \nimport * as ui from './utils/messages.js'\n\n//SQUARE\nfunction Square(props) {\n\n    return (\n        <button \n          className=\"square\" \n          onClick={props.onClick}\n        >\n            {props.value}\n        </button>\n    );\n}\n\n//BOARD\nclass Board extends React.Component {\n\t\n\trenderSquare(i) {\n    \treturn (\n    \t\t<Square \n    \t\t\tvalue={this.props.squares[i]}\n    \t\t\tonClick={() => this.props.onClick(i)}\n    \t\t/>);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className=\"board-row\">\n\t\t\t\t\t{this.renderSquare(0)}\n\t\t\t\t\t{this.renderSquare(1)}\n\t\t\t\t\t{this.renderSquare(2)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"board-row\">\n\t\t\t\t\t{this.renderSquare(3)}\n\t\t\t\t\t{this.renderSquare(4)}\n\t\t\t\t\t{this.renderSquare(5)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"board-row\">\n\t\t\t\t\t{this.renderSquare(6)}\n\t\t\t\t\t{this.renderSquare(7)}\n\t\t\t\t\t{this.renderSquare(8)}\n\t\t\t\t</div>\n\t\t\t</div>\n    \t);\n    }\n}\n\n\n//GAME\nclass Game extends React.Component {\n\tconstructor(props) {\n    \tsuper(props);\n\n    \t//Establish Connection\n    \tlet args = conn.getArgumenets();\n    \tlet data = conn.connect(args['host']+':'+args['playmanster'],args['token'])\n    \t\n    \tthis.state = {\n    \t\thost: args['host'],\n    \t\tgamemaster: args['gamemaster'],\n      \t\tsquares: Array(9).fill(null),\n    \t\tmyTurn: false,\n    \t\ttoken: args['token'],\n    \t\tsocket: data['socket'],\n    \t\tstatus: data['status'],\n    \t\ttype: null,\n    \t\troundID: null,\n    \t};\n\n    \t//set event handlers for server messages\n    \tconn.setListeners(this);\n  \t}\n\n  \t\n\thandleClick(i){\n\t  \tif (this.state.myTurn && this.state.state !== 5) {\n\t\t\tconst squares = this.state.squares.slice();   //create a copy of the array\n\n\t\t\t//if the game is over or the sqare is already filled, return\n\t\t\tif (condition.calculateWinner(squares) || squares[i]){\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsquares[i] = this.state.type;\n\t\t\t\n\t\t\tthis.setState({\n\t\t\t\tsquares: squares,\n\t\t\t\tmyTurn: !this.state.myTurn,\n\t\t\t});\n\n\t\t\tlet winner = condition.calculateWinner(squares);\n\t\t\tlet endgame = condition.isGameEnded(squares);\n\t\t\tvar progress = 0;\n\n\t\t\tif (winner === this.state.type) {   //check if you won\n\t\t\t\tprogress = 1;\n\t\t\t}else if (winner === null && endgame) {  //the game is ended and nobody won\n\t\t\t\tprogress = 2;\n\t\t\t}\n\n\t\t\t//check if the game is ended\n\t\t\tif(endgame || winner){\n\t\t\t\tthis.setState({\n\t\t\t\t\tstatus: 3,\n\t\t\t\t});\n\t\n\t\t\t}\n\n\t\t\tlet message = {\n\t\t\t\troundID : this.state.roundID,\n\t\t\t\tboard : squares,\n\t\t\t\tprogress: progress,\n\t\t\t}\n\n\t\t\tconsole.log(message)\n\n\t\t\tthis.state.socket.emit('update', message)\n\t\t}\n\t}\n\t\n\t// Setup the `beforeunload` event listener\n\tsetupBeforeUnloadListener() {\n\t    window.addEventListener(\"beforeunload\", (ev) => {\n\t        ev.preventDefault();\n\t        return 'Are you sure you want to leave?';\n\t    });\n\t}\n\n\tcomponentDidMount() {\n        // Activate the event listener\n        this.setupBeforeUnloadListener();\n    }\n\n\trender() {\n\t\tlet winner = condition.calculateWinner(this.state.squares);\n\t\tlet gameOver = condition.isGameEnded(this.state.squares);\n  \t\tlet status = ui.showGameStatus(this.state.status);\n  \t\tlet endState = ui.showWinner(winner, this.state.type, gameOver, this.state.status);\n  \t\t\n  \t\tif (this.state.status !== 5) {\n\t  \t\tvar turn = ui.showTurn(this.state.status, this.state.myTurn);\n\t  \t\tvar symbol = ui.showSymbol(this.state.type)\n\t  \t}\n\t  \t\n    \treturn (\n\t\t\t<div className=\"game bg\">\n\t\t\t\t<div className=\"game-title\">\n\t\t\t\t\t<div>Tic - Tac - Toe</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"game-board\">\n\t\t\t\t\t<Board \n\t\t\t\t\t\tsquares={this.state.squares}\n\t\t\t\t\t\tonClick={(i) => this.handleClick(i)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"game-info row\">\n\t\t\t\t\t<div className=\"status column left\">\n\t\t\t\t\t\t<div>{symbol}</div>\n\t\t\t\t\t\t<div>{status}</div>\n\t\t\t\t\t \t<div>{turn}</div>\n\t\t\t\t\t </div>\n\t\t\t\t\t <div className=\"column right\">\n\t\t\t\t\t \t<div className=\"endstate\">{endState}</div>\n\t\t\t\t\t </div>\n\t\t\t\t</div>\n\t\t\t</div>\n    );\n  }\n}\n\nexport default Game;"]},"metadata":{},"sourceType":"module"}